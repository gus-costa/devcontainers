{
  "id": "proxy",
  "version": "1.0.0",
  "name": "Proxy",
  "description": "Routes all HTTP/HTTPS traffic through Squid proxy and initializes firewall at container start.",
  "documentationURL": "https://github.com/gus-costa/devcontainers/tree/main/features/proxy",
  "containerEnv": {
    "PROXY_HOST": "squid",
    "PROXY_PORT": "3128",
    "HTTP_PROXY": "http://${PROXY_HOST}:${PROXY_PORT}",
    "http_proxy": "http://${PROXY_HOST}:${PROXY_PORT}",
    "HTTPS_PROXY": "http://${PROXY_HOST}:${PROXY_PORT}",
    "https_proxy": "http://${PROXY_HOST}:${PROXY_PORT}",
    "NO_PROXY": "localhost,127.0.0.1",
    "no_proxy": "${NO_PROXY}"
  },
  "dependsOn": {
    "localhost:5000/firewall/firewall:1": {}
  },
  "postStartCommand": "sudo -E /usr/local/bin/init-firewall.sh"
}